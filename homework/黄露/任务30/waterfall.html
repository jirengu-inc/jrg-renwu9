<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
	<title>waterfall</title>
	<style type="text/css">
		.item{
			position: absolute;
			width: 200px;
			margin-right: 10px;
			margin-top: 10px;
			transition: all 1s;
		}
		.h1{
			height: 200px;
			background: #6A6AFF;
		}
		.h2{
			height: 350px;
			background:	#00CACA;
		}
		.h3{
			height: 400px;
			background: #8600FF;
		}



	</style>
</head>
<body>
<div class="ct">
	<div class="item h1">1</div>
	<div class="item h2">2</div>
	<div class="item h2">3</div>
	<div class="item h3">4</div>
	<div class="item h2">5</div>
	<div class="item h2">6</div>
	<div class="item h3">7</div>
	<div class="item h1">8</div>
	<div class="item h2">9</div>
	<div class="item h1">10</div>
	<div class="item h1">11</div>
	<div class="item h3">12</div>
	<div class="item h3">13</div>
	<div class="item h2">14</div>
	<div class="item h1">15</div>
	<div class="item h3">16</div>
	<div class="item h1">17</div>
</div>
<script src='http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js'></script>
<script type="text/javascript">
function render(){
	var itemWidth=$('.item').outerWidth(true),
	    colNum=parseInt($(window).width()/itemWidth),
	    SumHeightArr=[];
    for(var i=0;i<colNum;i++){
    	SumHeightArr.push(0);
    }
    $('.item').each(function(){
    	var $cur=$(this);
    	var idx=0,
            minHeight=SumHeightArr[0];
        for(var i=0;i<SumHeightArr.length;i++){
        	if(SumHeightArr[i]<minHeight){
        		idx=i;
        		minHeight=SumHeightArr[i];
        	}
        }
        $cur.css({
        	left:itemWidth*idx,
        	top:minHeight
        });
        SumHeightArr[idx] += $cur.outerHeight(true);
    });
}

render();
var clock;
$(window).on('resize',function(){
	if(clock){
		clearTimeout(clock);
	}
	clock=setTimeout(function(){
		render();
		console.log(1);
	},200);
}) 









</script>
</body>
</html>